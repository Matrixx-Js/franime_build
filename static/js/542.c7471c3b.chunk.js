"use strict";(self.webpackChunkfranime_front=self.webpackChunkfranime_front||[]).push([[542],{5542:function(n,r,t){t.r(r),t.d(r,{genPourVousAnimes:function(){return a}});var e=t(4165),i=t(1413),u=t(2982),o=t(5861),c=t(5875),f=t.n(c);function a(n,r){return s.apply(this,arguments)}function s(){return(s=(0,o.Z)((0,e.Z)().mark((function n(r,o){var c,a,s,l,p,d,h,m,g,v,w,Z;return(0,e.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(m=function(n,r,t,e){return(f().compareTwoStrings(n.join(" "),t)+r.filter((function(n){return e.includes(n)})).length/r.length*100)/2},l=function(n){var e=t(5597),i=e.removeStopwords,o=e.fra,c=new Set;return n.forEach((function(n){var t=r.find((function(r){return parseInt(r.id)===parseInt(n.id)}));if(t&&t.description){var e=t.description.replace(/[^a-zA-Z0-9]/g," ").split(" ").filter((function(n){return n.length>3}));i(e,o).forEach((function(n){return c.add(n)}))}})),c=a((0,u.Z)(c)),c=(0,u.Z)(c).sort((function(n,r){return r.length-n.length})),(0,u.Z)(c).slice(0,1e3)},s=function(n){var t={};return n.forEach((function(n){var e=r.find((function(r){return parseInt(r.id)===parseInt(n.id)}));e&&e.themes.forEach((function(n){t[n]?t[n]++:t[n]=1}))})),Object.entries(t).sort((function(n,r){return r[1]-n[1]})).slice(0,8).map((function(n){return n[0]}))},a=function(n){for(var r,t=n.length;0!==t;){r=Math.floor(Math.random()*t),t--;var e=[n[r],n[t]];n[t]=e[0],n[r]=e[1]}return n},c=o.lastanimes.concat(o.maliste),p=l(c),d=s(c),h=(0,u.Z)(r).map((function(n){return{description:n.description,themes:n.themes,id:n.id,title:n.title}})).filter((function(n){return o&&!o.lastanimes.find((function(r){return r.id===n.id}))&&!o.maliste.find((function(r){return r.id===n.id}))})),g=[],v=0;v<h.length;v++)w=h[v],Z=m(p,d,w.description,w.themes),g.push((0,i.Z)({similarityScore:Z},w));if(!(g.length>0)){n.next=18;break}return g=g.sort((function(n,r){return r.similarityScore-n.similarityScore})).slice(0,50),g=a(g),c.find((function(n){return n.nsfw}))||(g=g.filter((function(n){return!n.nsfw}))),g=g.slice(0,10),n.abrupt("return",g);case 18:return n.abrupt("return",[]);case 19:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}}]);